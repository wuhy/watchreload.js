!function(e){var t=function(e){for(var t=e.split("/"),n=r,o=0,l=t.length;l>o;o++){var a=t[o];a&&(n=n[a])}return n},r={common:{constant:{},util:{},dom:{}},options:{},command:{},socket:{},index:{},log:{}},n={},o={exports:n};!function(e,t,r){t.URL_STYLE_REGEXP=/url\s*\(\s*['"]?\s*([^\s'"]*)\s*['"]?\s*\)/g}(o,n,t),r.common.constant=o.exports,n={},o={exports:n},function(t,r,n){t.exports=r={trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},getPathSegments:function(e){for(var t=e.split("/"),r=[],n=0,o=t.length;o>n;n++){var l=t[n];l&&r.push(l)}return r},isAbsolutePath:function(e){return/^\w+:\/\//.test(e)},getAbsolutePath:function(t,n){if(r.isAbsolutePath(n))return n;t=t?r.parseURL(t).url:r.parseURL(e.location.href).url;var o=r.parseURL(n),l=r.getPathSegments(t),a=r.getPathSegments(o.url);/\/$/.test(t)||l.pop();for(var i=0,s=a.length;s>i;i++){var u=a[i];"."!==u&&(".."===u?l.pop():l.push(u))}var c=l[0];return/^\w+:$/.test(c)&&(l[0]=c+"/"),l.join("/")+o.param+o.hash},parseURL:function(e){var t,r="";(t=e.indexOf("#"))>=0&&(r=e.slice(t),e=e.slice(0,t));var n="";return(t=e.indexOf("?"))>=0&&(n=e.slice(t),e=e.slice(0,t)),{url:e,param:n,hash:r}},addQueryTimestamp:function(e,t){var n=r.parseURL(e),o=n.param,l="browserreload="+(t||(new Date).getTime()),a=o.replace(/(\?|&)browserreload=(\d+)/,"$1"+l);return a===o&&(a=o+((o?"&":"?")+l)),n.url+a+n.hash},getMatchRatio:function(e,t){for(var r=e.length,n=t.length,o=0,l=r-1,a=n-1;l>=0&&a>=0&&e[l]===t[a];l--,a--)o++;return parseInt(o/r*100,10)},findMaxMatchFile:function(e,t){for(var n=r.getPathSegments(r.parseURL(e).url),o=null,l=[],a=0,i=t.length;i>a;a++){var s=t[a],u=s.fullHref||r.getAbsolutePath(null,s.href),c=r.getPathSegments(r.parseURL(u).url),f=r.getMatchRatio(n,c),p=100===f;(!o||p||o.ratio<f)&&(o={file:s,ratio:f,isFullMatch:p},p&&l.push(o))}return!l.length&&o&&l.push(o),l}}}(o,n,t),r.common.util=o.exports,n={},o={exports:n},function(t,r,n){function o(t,r){var n=!1,l=t.sheet,a=e.navigator;if(/webkit/i.test(a.userAgent))n=!!l||null===l;else if(l)try{n=!!l.cssRules}catch(i){/security|insecure/i.test(i.message)&&(n=!0)}n?setTimeout(function(){r()},1):setTimeout(function(){o(t,r)},1)}var l=n("common/util"),a=n("common/constant"),i=a.URL_STYLE_REGEXP;t.exports=r={isIE:!!document.createStyleSheet,styleEvent:{},querySelectorAll:function(e){return document.querySelectorAll?document.querySelectorAll(e):"undefined"!=typeof jQuery?jQuery(e):null},getLinkStyles:function(){for(var e=document.getElementsByTagName("link"),t=[],r=0,n=e.length;n>r;r++){var o=e[r];"stylesheet"!==o.rel||o.browserReloading||t.push(o)}return t},getStyleOwnerNode:function(e){for(var t;e;){if(t=e.ownerNode||e.owningElement)return t;e=e.parentStyleSheet}},extractImportStyleHref:function(e){e=l.trim(e);var t=i.exec(e);return t&&2===t.length?e=t[1]:t||(t=/^\s*['"]\s*([^\s]*)\s*['"]/.exec(e)),t&&2===t.length&&(e=t[1]),e},getImportStyleFullHref:function(e){var t=e.rule,r=e.href,n=t.parentStyleSheet,o=l.getAbsolutePath,a=n.href&&o("",n.href);return r=o(a,r)},collectImportStyles:function(t,n){var o;try{o=t.cssRules}catch(l){return}var a=!!o;o||(o=t.imports);var i=r.getStyleOwnerNode(t);if(o&&o.length)for(var s=r.extractImportStyleHref,u=r.getImportStyleFullHref,c=r.collectImportStyles,f=e.CSSRule,p=0,h=o.length;h>p;p++){var m=o[p];if(f&&m.type===f.IMPORT_RULE||!f){var d=s(m.href),g={link:i,rule:m,index:p,href:d};g.fullHref=u(g),n.push(g),c(a?m.styleSheet:m,n)}}},getImportStyles:function(){for(var e=document.styleSheets,t=[],n=r.collectImportStyles,o=0,l=e.length;l>o;o++)n(e[o],t);return t},setStyleSupportEvent:function(e,t){r.styleEvent[e]=t},isStyleSupportEvent:function(e){return r.styleEvent[e]},styleOnLoad:function(e,t){var n=function(){n.called||(n.called=!0,t&&t())};e.onload=function(){r.setStyleSupportEvent("load",!0),n()},e.onerror=function(){n()},r.isStyleSupportEvent("load")||setTimeout(function(){o(e,n)},0)},reloadLinkStyle:function(e){if(!e.browserReloading){var t=e.cloneNode();t.href=l.addQueryTimestamp(t.href),e.browserReloading=!0;var n=e.parentNode;n.lastChild===e?n.appendChild(t):n.insertBefore(t,e.nextSibling),r.styleOnLoad(t,function(){var t=e.parentNode;t&&t.removeChild(e)})}},reloadImportStyle:function(e){var t=e.rule,r=e.index,n=l.addQueryTimestamp(e.fullHref),o="";try{o=t.media||"","string"!=typeof o&&(o=[].join.call(t.media,", "))}catch(a){}var i='@import url("'+n+'") '+o+";",s=t.parentStyleSheet;s.insertRule?s.insertRule(i,r):s.addImport&&s.addImport(n,r);var u=r+1;s.deleteRule&&s.cssRules.length>u?s.deleteRule(u):s.removeImport&&s.imports.length>u&&s.removeImport(u)}},r.isIE&&r.setStyleSupportEvent("load",!0)}(o,n,t),r.common.dom=o.exports,n={},o={exports:n},function(e,t,r){e.exports=t={logLevel:"info",livereload:{}}}(o,n,t),r.options=o.exports,n={},o={exports:n},function(t,r,n){function o(e,t,r){for(var n=r.basePath,o=r.path,l=r.reloadVersion,a=!1,i=f.escapeRegExp,s=0,u=t.length;u>s;s++){var c=t[s],p=e[c];if(p){for(var h,d,g=null;(h=m.exec(p))&&(d=2===h.length?h[1]:null,!d||(g=f.findMaxMatchFile(o,[{fullHref:f.getAbsolutePath(n,d)}])[0],!g.isFullMatch)););g&&g.isFullMatch&&(e[c]=p.replace(new RegExp(i(d),"g"),f.addQueryTimestamp(d,l)),a=!0)}}return a}function l(t,r){var n=[];try{n=t.cssRules||t.rules}catch(a){return!1}for(var i,s=e.CSSRule,u=!1,c=0,f=n.length;f>c;c++){var p=n[c];if(s&&p.type!==s.STYLE_RULE)s&&p.type===s.MEDIA_RULE&&(i=l(p,r),u||(u=i));else for(var h=0,m=d.length;m>h;h++){var g=d[h];i=o(p.style,g.styleNames,r),u||(u=i)}}return u}function a(e,t){for(var r,n=!1,o=document.styleSheets,a=f.getAbsolutePath,i=0,s=o.length;s>i;i++){var u=o[i],p=u.href;r=l(u,{basePath:p&&a(null,p),path:e,reloadVersion:t}),n||(n=r)}var h=c.getImportStyles();for(i=0,s=h.length;s>i;i++){var m=h[i],d=m.rule;r=l(d.styleSheet||d,{basePath:m.fullHref,path:e,reloadVersion:t}),n||(n=r)}return n}function i(e){var t=p.livereload||{};for(var r in t)if(t.hasOwnProperty(r)){var n=new RegExp(r);if(n.test(e))return t[r]}return e}function s(e,t){for(var r=!1,n=c.querySelectorAll,l=0,a=d.length;a>l;l++)for(var i=d[l],s=n("[style]")||[],u=0,f=s.length;f>u;u++){var p=o(s[u].style,i.styleNames,{path:e,reloadVersion:t});r||(r=p)}return r}function u(e,t){for(var r=document.images,n=[],o=0,l=r.length;l>o;o++){var a=r[o];n[o]={href:a.src,img:a}}var i=!1,s=f.findMaxMatchFile(e,n);for(o=0,l=s.length;l>o;o++){var u=s[o];u.isFullMatch&&(u.file.img.src=f.addQueryTimestamp(u.file.href,t),i=!0)}return i}var c=n("common/dom"),f=n("common/util"),p=n("options"),h=n("common/constant"),m=h.URL_STYLE_REGEXP,d=[{selector:"background",styleNames:["backgroundImage"]},{selector:"border",styleNames:["borderImage","webkitBorderImage","MozBorderImage"]}];t.exports=r={init:function(e){p.livereload=e.livereload||{};for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t])},reloadCSS:function(e){var t=i(e.path),n=!1,o=c.getLinkStyles(),l=c.getImportStyles(),a=f.findMaxMatchFile,s=a(t,o)[0],u=a(t,l)[0];s&&s.isFullMatch&&(c.reloadLinkStyle(s.file),n=!0),u&&u.isFullMatch&&(c.reloadImportStyle(u.file),n=!0),n||r.reloadPage()},reloadImage:function(e){document.querySelectorAll||"undefined"!=typeof jQuery||r.reloadPage();var t=i(e.path),n=!1,o=(new Date).getTime();n=u(t,o);var l=s(t,o);n||(n=l),l=a(t,o),n||(n=l),n||r.reloadPage()},reloadPage:function(){e.document.location.reload()}}}(o,n,t),r.command=o.exports,n={},o={exports:n},function(t,r,n){function o(t,r){var n={info:"log",warn:"warn",error:"error"},o={info:1,warn:2,error:3};if(!(o[t]<(o[l.logLevel]||o.info))){var a=e.console;if(a){var i=a[n[t]]||a.log;"function"==typeof i&&i.call(a,"[watchreload-"+t+"]: "+r)}}}var l=n("options");t.exports=r={info:function(e){o("info",e)},warn:function(e){o("warn",e)},error:function(e){o("error",e)}}}(o,n,t),r.log=o.exports,n={},o={exports:n},function(t,r,n){var o=n("log"),l=n("command");t.exports=r={initMessageListener:function(){var t=this._socket,r=this._io;t.on("command",function(e){o.info("receive command: "+r.JSON.stringify(e));var t=l[e.type];delete e.type,t&&t(e)}),t.on("connect",function(){t.emit("register",{name:e.navigator.userAgent}),o.info("connection is successful.")}),t.on("disconnect",function(){o.info("connection is disconnected.")}),t.on("reconnecting",function(){o.info("reconnection...")})},sendMessage:function(e,t){var r=this._socket;r&&r.emit(e,t||{})},open:function(e){this._io=e,this._socket=e.connect("http://{{ip}}:{{port}}"),this.initMessageListener()},close:function(){var e=this._socket;e.removeAllListeners(),e.disconnect(),this._socket=this._io=null}}}(o,n,t),r.socket=o.exports,n={},o={exports:n},function(t,r,n){var o=n("socket");o.open(e.io)}(o,n,t),r.index=o.exports}(window);